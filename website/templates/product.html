{% extends "base.html" %}
{% block stylesheet %}
    <link rel="stylesheet" type="text/css"
          href="{{ url_for('static', filename='assets/css/product.css') }}"> {% endblock %}
{% block title %}Products{% endblock %}
{% block content %}
    <div class="flex">
        <div class="card-violet">
            {% if product[9] %}

                <img class="card-img" src="{{ product[4] }}" alt="Card image cap">
            {% else %}
                <img class="card-img" src="/static/assets/img/product_photo/{{ product[4] }}"
                     alt="Card image cap">
            {% endif %}
            <div class="card-info">
                <div class="card-header"><b>{{ product[7] }}, {{ product[1] }}</b></div>
                <div class="card-body">
                    <p>Ocena: </p>
                    <p class="card-text">{{ product[2] }}</p>
                </div>

                <div class="card-body">
                    <p>Opis:</p>
                    <p>{{ product[5] }}</p>
                </div>
                <div class="card-footer">
                    <p>Data dodania: {{ product[3].strftime('%Y-%m-%d') }}</p>
                    <p>Kod kreskowy: {{ product[6] }}</p>
                </div>
            </div>
        </div>

        {% if user.is_authenticated and comment_added == False %}
            <div class="card-violet">
                <form class="p-2 border border-success" method="post" style="max-width:680px; margin:auto;">
                    <div class="rate">
                        <input type="radio" id="star5" name="rate" value="5"/>
                        <label for="star5" title="text">5 stars</label>
                        <input type="radio" id="star4" name="rate" value="4"/>
                        <label for="star4" title="text">4 stars</label>
                        <input type="radio" id="star3" name="rate" value="3"/>
                        <label for="star3" title="text">3 stars</label>
                        <input type="radio" id="star2" name="rate" value="2"/>
                        <label for="star2" title="text">2 stars</label>
                        <input type="radio" id="star1" name="rate" value="1"/>
                        <label for="star1" title="text">1 star</label>
                    </div>

                    <textarea
                            type="text"
                            class="form-control"
                            id="comment"
                            name="comment"
                            placeholder="Komentarz"></textarea>
                    <div class="d-flex">
                        <label for="comment">Komentarz</label>
                        <button type="submit" class="btn btn-success ms-auto">Dodaj komentarz</button>
                    </div>
            </div>
            </form>
            </div>
        {% endif %}

    {% for comment in comments %}
        <div class="card-violet">
            <div class="grid-1-1-3">
                <div class="info-user">
                    <img class="info-avatar"
                         src="{{ 'https://avatars.dicebear.com/api/personas/'+comment[1]+'.svg' }}"/>
                    <div class="info-nick">{{ comment[1] }} </div>
                    <div class="info-date">{{ comment[4].strftime('%Y-%m-%d') }}</div>
                </div>
                <p class="card-text">{{ comment[3] }} </p>
                <div class="info-comment">{{ comment[2] }}</div>
            </div>
            {% if user.is_authenticated and user.get_id() == str(comment[6]) %}
                <a href=/delete/{{ comment[5] }}/{{ comment[6] }}/{{ product[8] }}>
                    <button class="btn-red" type="button" name="del" id="delete">Usu≈Ñ komentarz
                    </button>
                </a>
            {% endif %}
        </div>
    {% endfor %}
    </div>
    </div>
    <script src="{{ url_for('static', filename='main.js') }}"></script>
{% endblock %}
